/*!
 *  Photobox by Gregory Klein - http://www.gregoryklein.fr
 *  Licensed under the MIT license
 */
Photobox={init:function(o){var t={};t.opacity=o.opacity||.7,t.duration=o.duration||500,t.interval=o.interval||500,t.wrapAround=o.wrapAround||!1,t.player=o.player||!1,Photobox.options=t,Photobox.album={title:"",images:[]};var e=$(document.body);e.on("click","#photobox__close",Photobox.close),e.on("click","#photobox__bg",Photobox.close),e.on("click","#photobox__previous",Photobox.previous),e.on("click","#photobox__next",Photobox.next),e.on("click","#photobox__play",Photobox.play),e.on("click","#photobox__stop",Photobox.stop),e.on("click","*[rel='photobox']",function(o){Photobox.allItems=document.querySelectorAll('*[rel="photobox"]'),Photobox.album={title:"",images:[]},$(Photobox.allItems).each(function(){$(this).hover(function(){$(this).css("cursor","pointer")})}),Photobox.clickItem(o,this)})},clickItem:function(o,t){if(o.preventDefault(),Photobox.album.images=[],t.getAttribute("data-pb-album")){Photobox.album.title=Photobox.album.title||t.getAttribute("data-pb-album");for(var e=0;e<Photobox.allItems.length;e++){var n=Photobox.allItems[e],i=n.getAttribute("data-pb-album");i==Photobox.album.title&&Photobox.album.images.push(n)}Photobox.currentIndex=Photobox.album.images.indexOf(t)}else Photobox.album.images.push(t),Photobox.currentIndex=0;return $("#photobox").remove(),$("body").append('<div id="photobox"><div id="photobox__bg"><i id="photobox__spinner"></i></div><div id="photobox__container"><div id="photobox__content"></div><div id="photobox__menubar"><i id="photobox__close"></i><div id="photobox__control-panel"><i id="photobox__previous"></i><i id="photobox__next"></i></div></div></div></div>'),$("#photobox__container").hide(),$("#photobox__menubar").hide(),$("#photobox__bg").hide().fadeTo(Photobox.options.duration,Photobox.options.opacity),Photobox.draw(t),!1},draw:function(o){var o=o||Photobox.album.images[Photobox.currentIndex];"IMG"==o.nodeName?Photobox.link=$(o).attr("src"):"A"==o.nodeName?Photobox.link=$(o).attr("href"):Photobox.link="",Photobox.title=$(o).attr("title"),Photobox.showSpinner(!0),Photobox.img=new Image,Photobox.img.src=Photobox.link,Photobox.img.onload=function(){Photobox.anim()}},anim:function(){$("#photobox__container").fadeIn(),$("#photobox__content img").hide(),Photobox.resize()},resize:function(){docW=window.innerWidth,docH=window.innerHeight;var o=Photobox.img.width,t=Photobox.img.height,e=o/t,n=.85*docW,i=.85*docH-60;if(o>=t?(o>n&&(o=n,t=n/e),t>i&&(t=i,o=i*e)):(t>i&&(t=i,o=i*e),o>n&&(o=n,t=n/e)),Photobox.album.images.length>1){var h=$("#photobox__control-panel");h.show(),Photobox.options.player&&!Photobox.playTimer&&($("#photobox__play").remove(),$("#photobox__stop").remove(),h.append('<i id="photobox__play"></i><i id="photobox__stop"></i>')),$("#photobox__index").remove(),h.append('<span id="photobox__index">'+(Photobox.currentIndex+1)+"/"+Photobox.album.images.length+"</span>")}else $("#photobox__previous").hide(),$("#photobox__next").hide();$("#photobox__title").remove(),Photobox.playTimer?($("#photobox__content").css("width",o).css("height",t),Photobox.showSpinner(!1),$("#photobox__content").empty(),$("#photobox__content").append('<img src="'+Photobox.link+'"width="'+o+'" height="'+t+'">'),$("#photobox__content img").show(),$("#photobox__menubar").append('<span id="photobox__title">'+Photobox.title+"</span>"),$("#photobox__menubar").show()):$("#photobox__content").animate({width:o},Photobox.options.duration/2).animate({height:t},Photobox.options.duration/2,"linear",function(){Photobox.showSpinner(!1),$("#photobox__content").empty(),$("#photobox__content").append('<img src="'+Photobox.link+'"width="'+o+'" height="'+t+'">'),$("#photobox__content img").show(),$("#photobox__menubar").append('<span id="photobox__title">'+Photobox.title+"</span>"),$("#photobox__menubar").fadeIn()})},close:function(){Photobox.stop(),$("#photobox").fadeOut(Photobox.options.duration/2,function(){$("#photobox").remove()})},previous:function(){return Photobox.currentIndex--,!(Photobox.currentIndex<=-1&&(Photobox.currentIndex=Photobox.options.wrapAround?Photobox.album.images.length-1:0,0==Photobox.currentIndex))&&(Photobox.draw(),!1)},next:function(){if(Photobox.currentIndex++,Photobox.currentIndex>=Photobox.album.images.length&&(Photobox.currentIndex=Photobox.options.wrapAround||Photobox.playTimer?0:Photobox.album.images.length-1,Photobox.currentIndex==Photobox.album.images.length-1))return!1;Photobox.album.images[Photobox.currentIndex];return Photobox.draw(),!1},play:function(){var o=[];$("#photobox__content");$("#photobox__play").hide(),$("#photobox__stop").show();for(var t=0;t<Photobox.album.images.length;t++){var e=new Image,n=Photobox.album.images[t];"IMG"==n.nodeName?e.src=Photobox.album.images[t].src:"A"==n.nodeName&&(e.src=Photobox.album.images[t].href),e.width=Photobox.width,e.height=Photobox.height,o.push(e)}Photobox.playTimer=window.setInterval(function(){Photobox.currentIndex>=o.length&&(Photobox.currentIndex=0),Photobox.next()},Photobox.options.interval)},stop:function(){$("#photobox__stop").hide(),$("#photobox__play").show(),window.clearInterval(Photobox.playTimer),Photobox.playTimer=void 0},showSpinner:function(o){o?($("#photobox__spinner").hide().fadeIn(),$("#photobox__content").css("opacity","0.5")):($("#photobox__spinner").hide(),$("#photobox__content").css("opacity","1"))}};