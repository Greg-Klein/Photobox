/*!
 *	Photobox by Gregory Klein - http://www.gregoryklein.fr
 *	Licensed under the MIT license
 */
photobox={init:function(o){var arguments={};o&&(arguments=o),photobox.opacity=arguments.opacity||.7,photobox.duration=arguments.duration||500,photobox.interval=arguments.interval||500,photobox.wrapAround=arguments.wrapAround||!1,photobox.player=arguments.player||!1,$(document.body).on("click","#photobox__previous",photobox.previous),$(document.body).on("click","#photobox__next",photobox.next),$(document.body).on("click","#photobox__play",photobox.play),$(document.body).on("click","#photobox__stop",photobox.stop),$(document.body).on("click","#photobox__close",photobox.close),$(document.body).on("click","#photobox__bg",photobox.close),$(document.body).on("click","a[rel='photobox']",function(){if(photobox.album={title:"",images:[]},photobox.allLinks=[],photobox.images=[],photobox.link=$(this).attr("href"),photobox.title=$(this).attr("title"),this.getAttribute("data-photobox")){album=this.getAttribute("data-photobox"),""==photobox.album.title&&(photobox.album.title=album),photobox.allLinks=document.getElementsByTagName("a");for(var o=0;o<photobox.allLinks.length;o++){var t=photobox.allLinks[o];t.getAttribute("data-photobox")!=photobox.album.title||photobox.album.images.includes(t)||photobox.album.images.push(t.getAttribute("href"))}photobox.currentIndex=photobox.album.images.indexOf(photobox.link)}return photobox.open(),!1})},open:function(){$("#photobox").remove(),"undefined"==typeof photobox.title&&(photobox.title=""),$("body").append('<div id="photobox"><div id="photobox__bg">'+photobox.currentIndex+'<i id="photobox__spinner"></i></div><div id="photobox__container"><i id="photobox__close"></i><div id="photobox__content"></div><div id="photobox__control-panel"></div></div></div>'),photobox.album.images.length>1&&photobox.player&&$("#photobox__control-panel").append('<i id="photobox__play"></i><i id="photobox__stop"></i>'),$("#photobox__container").hide(),$("#photobox__title").hide(),$("#photobox__close").hide(),$("#photobox__previous").hide(),$("#photobox__next").hide(),$("#photobox__bg").hide().fadeTo(photobox.duration,photobox.opacity),$("#photobox__spinner").hide().fadeIn(),photobox.img=new Image,photobox.img.src=photobox.link,photobox.timer=window.setInterval(photobox.load,100)},play:function(){$("#photobox__play").hide(),$("#photobox__stop").show();for(var o=0;o<photobox.album.images.length;o++){var t=new Image;t.src=photobox.album.images[o],t.width=photobox.width,t.height=photobox.height,photobox.images.push(t)}photobox.playTimer=window.setInterval(function(){photobox.currentIndex>=photobox.images.length&&(photobox.currentIndex=0);var o=photobox.images[photobox.currentIndex];$("#photobox__content").empty(),$("#photobox__content").append(o),photobox.currentIndex++},photobox.interval)},stop:function(){$("#photobox__stop").hide(),$("#photobox__play").show(),photobox.images=[],window.clearInterval(photobox.playTimer)},previous:function(){if(photobox.currentIndex--,photobox.currentIndex<=-1){if(!photobox.wrapAround)return photobox.currentIndex=0,!1;photobox.currentIndex=photobox.album.images.length-1}var o=photobox.album.images[photobox.currentIndex];return photobox.img.src=o,photobox.link=o,photobox.title=photobox.getTitle(photobox.currentIndex),photobox.timer=window.setInterval(photobox.load,100),!1},next:function(){if(photobox.currentIndex++,photobox.currentIndex>=photobox.album.images.length){if(!photobox.wrapAround)return photobox.currentIndex=photobox.album.images.length-1,!1;photobox.currentIndex=0}var o=photobox.album.images[photobox.currentIndex];return photobox.img.src=o,photobox.link=o,photobox.title=photobox.getTitle(photobox.currentIndex),photobox.timer=window.setInterval(photobox.load,100),!1},getTitle:function(o){for(var t="",h=photobox.album.images[photobox.currentIndex],e=0;e<photobox.allLinks.length;e++){var p=photobox.allLinks[e];p.getAttribute("href")==h&&(t=p.getAttribute("title"))}return t},load:function(){photobox.img.complete&&(window.clearInterval(photobox.timer),photobox.anim())},anim:function(){$("#photobox__container").show(),$("#photobox__previous").remove(),$("#photobox__next").remove(),photobox.width=photobox.img.width,photobox.height=photobox.img.height,photobox.resize(),photobox.album.images.length>1&&($("#photobox__control-panel").append('<i id="photobox__previous"></i>'),$("#photobox__control-panel").append('<i id="photobox__next"></i>')),$("#photobox__content").empty(),$("#photobox__spinner").hide(),$("#photobox__content").animate({width:photobox.width},photobox.duration/2).animate({height:photobox.height},photobox.duration/2,"linear",function(){$("#photobox__title").show(),$("#photobox__close").show(),$("#photobox__previous").show(),$("#photobox__next").show(),$("#photobox__content").append('<img src="'+photobox.link+'"width="'+photobox.width+'" height="'+photobox.height+'"><span id="photobox__title">'+photobox.title+"</span>"),console.log("A")})},close:function(){$("#photobox").fadeOut(photobox.duration/2,function(){$("#photobox").remove()}),window.clearInterval(photobox.playTimer)},resize:function(){docW=window.innerWidth,docH=window.innerHeight,photobox.width=photobox.img.width,photobox.height=photobox.img.height;var o=photobox.width/photobox.height,t=.85*docW,h=.85*docH-60;photobox.width>=photobox.height?(photobox.width>t&&(photobox.width=t,photobox.height=t/o),photobox.height>h&&(photobox.height=h,photobox.width=h*o)):(photobox.height>h&&(photobox.height=h,photobox.width=h*o),photobox.width>t&&(photobox.width=t,photobox.height=t/o))}};
