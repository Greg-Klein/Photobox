/*!
 *	Photobox by Gregory Klein - http://www.gregoryklein.fr
 *	Licensed under the MIT license
 */
photobox={init:function(){photobox.opacity=.7,photobox.duration=500,$(document.body).on("click","#photobox__previous",photobox.previous),$(document.body).on("click","#photobox__next",photobox.next),$(document.body).on("click","#photobox__close",photobox.close),$(document.body).on("click","#photobox__bg",photobox.close),$(document.body).on("click","a[rel='photobox']",function(){if(photobox.album={title:"",images:[]},photobox.allLinks=[],photobox.link=$(this).attr("href"),photobox.title=$(this).attr("title"),this.getAttribute("data-photobox")){album=this.getAttribute("data-photobox"),""==photobox.album.title&&(photobox.album.title=album),photobox.allLinks=document.getElementsByTagName("a");for(var o=0;o<photobox.allLinks.length;o++){var t=photobox.allLinks[o];t.getAttribute("data-photobox")!=photobox.album.title||photobox.album.images.includes(t)||photobox.album.images.push(t.getAttribute("href"))}photobox.currentIndex=photobox.album.images.indexOf(photobox.link)}return photobox.open(photobox.link,photobox.title),!1})},open:function(o,t){$("#photobox").remove(),"undefined"==typeof t&&(t=""),photobox.link=o,photobox.title=t,$("body").append('<div id="photobox"><div id="photobox__bg">'+photobox.currentIndex+'<i id="photobox__spinner"></i></div><div id="photobox__container"><i id="photobox__close"></i><div id="photobox__content"></div></div></div>'),photobox.album.images.length>1&&(photobox.currentIndex<photobox.album.images.length-1&&$("#photobox__container").append('<i id="photobox__next"></i>'),photobox.currentIndex>0&&$("#photobox__container").append('<i id="photobox__previous"></i>')),$("#photobox__container").hide(),$("#photobox__title").hide(),$("#photobox__close").hide(),$("#photobox__previous").hide(),$("#photobox__next").hide(),$("#photobox__bg").hide().fadeTo(photobox.duration,photobox.opacity),$("#photobox__spinner").hide().fadeIn(),photobox.img=new Image,photobox.img.src=photobox.link,photobox.timer=window.setInterval(photobox.load,100)},previous:function(){photobox.currentIndex--;var o=photobox.album.images[photobox.currentIndex],t=photobox.getTitle(photobox.currentIndex);return photobox.open(o,t),!1},next:function(){photobox.currentIndex++;var o=photobox.album.images[photobox.currentIndex],t=photobox.getTitle(photobox.currentIndex);return photobox.open(o,t),!1},getTitle:function(o){for(var t="",h=photobox.album.images[photobox.currentIndex],i=0;i<photobox.allLinks.length;i++){var e=photobox.allLinks[i];e.getAttribute("href")==h&&(t=e.getAttribute("title"))}return t},load:function(){photobox.img.complete&&(window.clearInterval(photobox.timer),photobox.anim())},anim:function(){$("#photobox__container").show(),photobox.width=photobox.img.width,photobox.height=photobox.img.height,photobox.resize(),$("#photobox__content").append('<img src="'+photobox.link+'"width="'+photobox.width+'" height="'+photobox.height+'"><span id="photobox__title">'+photobox.title+"</span>"),$("#photobox__content img").hide(),$("#photobox__content").animate({width:photobox.width},photobox.duration/2).animate({height:photobox.height},photobox.duration/2,"linear",function(){$("#photobox__title").show(),$("#photobox__close").show(),$("#photobox__previous").show(),$("#photobox__next").show(),$("#photobox__content img").fadeIn()})},close:function(){$("#photobox").fadeOut(photobox.duration/2,function(){$("#photobox").remove()})},resize:function(){docW=window.innerWidth,docH=window.innerHeight,photobox.width=photobox.img.width,photobox.height=photobox.img.height;var o=photobox.width/photobox.height,t=.85*docW,h=.85*docH-60;photobox.width>=photobox.height?(photobox.width>t&&(photobox.width=t,photobox.height=t/o),photobox.height>h&&(photobox.height=h,photobox.width=h*o)):(photobox.height>h&&(photobox.height=h,photobox.width=h*o),photobox.width>t&&(photobox.width=t,photobox.height=t/o))}};